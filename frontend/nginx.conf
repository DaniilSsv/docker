server {
  listen 80;
  server_name localhost;

  # Inject the API URL into the page dynamically
  location / {
    # Inject the API URL via environment variable
    set $API_URL $http_API_URL;
    
    # Modify the index.html dynamically to inject the API URL
    sub_filter 'REACT_APP_API_URL_PLACEHOLDER' $API_URL;
    sub_filter_once off;

    root /usr/share/nginx/html;
    try_files $uri /index.html;
  }
}
